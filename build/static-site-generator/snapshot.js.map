{"version":3,"sources":["../../source/static-site-generator/snapshot.js"],"names":["host","port","pages","output","tick","removeSync","page","page_contents","outputFileSync","join","snapshot","unshift","snapshot_progress","width","total","length","progress_tick","snapshot_website"],"mappings":";;;;;;;;;;;;;;;;;;;wEAiCA,kBAAwBA,IAAxB,EAA8BC,IAA9B,EAAoCC,KAApC,EAA2CC,MAA3C,EAAmDC,IAAnD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEC;AACA,wBAAGC,UAAH,CAAcF,MAAd;;AAEA;AALD;AAAA;AAAA;AAAA;AAAA,6CAMoBD,KANpB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMYI,UANZ;AAAA;AAAA,aAQ8B,oCAAmBN,IAAnB,SAA2BC,IAA3B,GAAkCK,IAAlC,CAR9B;;AAAA;AAQQC,mBARR;;AASE,wBAAGC,cAAH,CAAkB,eAAKC,IAAL,CAAUN,MAAV,EAAkBG,IAAlB,EAAwB,aAAxB,CAAlB,EAA0DC,aAA1D;AACAH;;AAVF;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeM,Q;;;;;AAjCf;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA;;uEACe;AAAA,MAAkCV,IAAlC,SAAkCA,IAAlC;AAAA,MAAwCC,IAAxC,SAAwCA,IAAxC;AAAA,MAA8CC,KAA9C,SAA8CA,KAA9C;AAAA,MAAqDC,MAArD,SAAqDA,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAEd;AACAD,YAAMS,OAAN,CAAc,EAAd;;AAEA;AACMC,uBANQ,GAMY,uBAAa,4CAAb,EAC1B;AACCC,cAAO,EADR;AAECC,cAAOZ,MAAMa;AAFd,OAD0B,CANZ;;AAYd;;AAZc;AAAA,aAaRL,SAELV,IAFK,EAGLC,IAHK,EAILC,KAJK,EAKLC,MALK,EAML,SAASa,aAAT,GACA;AACCJ,yBAAkBR,IAAlB;AACA,OATI,CAbQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;UAAea,gB;;;;QAAAA,gB","file":"snapshot.js","sourcesContent":["import path from 'path'\nimport fs from 'fs-extra'\nimport progress from 'progress'\n\nimport download from './download'\n\n// Snapshots all pages (URLs)\nexport default async function snapshot_website({ host, port, pages, output })\n{\n\t// Add the main (\"home\") page\n\tpages.unshift('')\n\n\t// The progress meter for the website snapshotting process\n\tconst snapshot_progress = new progress(' Snapshotting [:bar] :total :percent :etas',\n\t{\n\t\twidth: 50,\n\t\ttotal: pages.length\n\t})\n\n\t// Start the website snapshotting process\n\tawait snapshot\n\t(\n\t\thost,\n\t\tport,\n\t\tpages,\n\t\toutput,\n\t\tfunction progress_tick()\n\t\t{\n\t\t\tsnapshot_progress.tick()\n\t\t}\n\t)\n}\n\nasync function snapshot(host, port, pages, output, tick)\n{\n\t// Clear the output folder\n\tfs.removeSync(output)\n\n\t// Snapshot every page and put it into the output folder\n\tfor (const page of pages)\n\t{\n\t\tconst page_contents = await download(`http://${host}:${port}${page}`)\n\t\tfs.outputFileSync(path.join(output, page, '/index.html'), page_contents)\n\t\ttick()\n\t}\n}\n"]}