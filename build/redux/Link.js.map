{"version":3,"sources":["../../source/redux/Link.js"],"names":["Hyperlink","on_click","bind","event","props","onClick","to","instantBack","context","router","store","Error","defaultPrevented","isModifiedEvent","isLeftClickEvent","preventDefault","dispatch","resolveToLocation","undefined","link_props","target","children","rest_props","location","is_local_website_link","propTypes","func","string","oneOfType","object","bool","isRequired","node","defaultProps","contextTypes","button","metaKey","altKey","ctrlKey","shiftKey"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAAA;;AAEA;;;;AACA;;;;AACA;;AACA;;;;IAEqBA,S;;;AA0CpB,sBACA;AAAA;;AAAA;;AAGC,QAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,OAAhB;AAHD;AAIC;;;;2BAEQC,K,EACT;AAAA,gBACsC,KAAKC,KAD3C;AAAA,OACSC,OADT,UACSA,OADT;AAAA,OACkBC,EADlB,UACkBA,EADlB;AAAA,OACsBC,WADtB,UACsBA,WADtB;AAAA,kBAE2B,KAAKC,OAFhC;AAAA,OAESC,MAFT,YAESA,MAFT;AAAA,OAEiBC,KAFjB,YAEiBA,KAFjB;;AAIC;;AACA,OAAI,CAACD,MAAL,EACA;AACC,UAAM,IAAIE,KAAJ,CAAU,+DAAV,CAAN;AACA;;AAED;AACA,OAAI,CAACD,KAAL,EACA;AACC,UAAM,IAAIC,KAAJ,CAAU,8DAAV,CAAN;AACA;;AAED;AACA,OAAIN,OAAJ,EACA;AACCA,YAAQF,KAAR;AACA;;AAED;AACA;AACA,OAAIA,MAAMS,gBAAV,EACA;AACC;AACA;;AAED;AACA,OAAIC,gBAAgBV,KAAhB,KAA0B,CAACW,iBAAiBX,KAAjB,CAA/B,EACA;AACC;AACA;;AAED;AACAA,SAAMY,cAAN;;AAEA;AACA;AACAL,SAAMM,QAAN,CAAe,6BAAeC,kBAAkBX,EAAlB,EAAsBG,MAAtB,CAAf,EAA8CS,SAA9C,EAAyDA,SAAzD,EAAoEA,SAApE,EAA+EX,WAA/E,CAAf;AACA;;;2BAGD;AAAA,iBACwC,KAAKH,KAD7C;AAAA,OACSG,WADT,WACSA,WADT;AAAA,OACyBY,UADzB;AAAA,OAESb,EAFT,GAEiDa,UAFjD,CAESb,EAFT;AAAA,OAEac,MAFb,GAEiDD,UAFjD,CAEaC,MAFb;AAAA,OAEqBC,QAFrB,GAEiDF,UAFjD,CAEqBE,QAFrB;AAAA,OAEkCC,UAFlC,0CAEiDH,UAFjD;AAAA,OAGSV,MAHT,GAGoB,KAAKD,OAHzB,CAGSC,MAHT;;AAKC;;AACA,OAAI,CAACA,MAAL,EACA;AACC,UAAM,IAAIE,KAAJ,CAAU,+DAAV,CAAN;AACA;;AAED;AACA,OAAMY,WAAWN,kBAAkBX,EAAlB,EAAsBG,MAAtB,CAAjB;;AAEA;AACA,OAAMe,wBAAyB,QAAOD,QAAP,uDAAOA,QAAP,OAAoB,QAArB,IACzB,OAAOA,QAAP,KAAoB,QAApB,IAAgCA,QAAhC,IAA4CA,SAAS,CAAT,MAAgB,GADjE;;AAGA,OAAIC,yBAAyB,CAACJ,MAA9B,EACA;AACC,WAAO;AAAA;AAAA,gCAAWD,UAAX,IAAwB,SAAU,KAAKlB,QAAvC;AAAoDoB;AAApD,KAAP;AACA;;AAED;AACA,UAAO;AAAA;AAAA,6BAAG,MAAOf,EAAV,EAAe,QAASc,MAAxB,IAAsCE,UAAtC;AAAqDD;AAArD,IAAP;AACA;;;4BArHMI,S,GACP;AACC;AACApB,UAAW,oBAAUqB,IAFtB;;AAIC;AACAN,SAAW,oBAAUO,MALtB;;AAOC;AACA;AACA;AACArB,KAAW,oBAAUsB,SAAV,CACV,CACA,oBAAUD,MADV,EAEA,oBAAUE,MAFV,EAGA,oBAAUH,IAHV,CADU,CAVZ;;AAiBC;AACA;AACAnB,cAAc,oBAAUuB,IAAV,CAAeC,UAnB9B;;AAqBC;AACAV,WAAW,oBAAUW;AAtBtB,C,SAyBOC,Y,GACP;AACC1B,cAAc;AADf,C,SAIO2B,Y,GACP;AACC;AACAzB,SAAS,oBAAUoB,MAAV,CAAiBE,UAF3B;;AAIC;AACArB,QAAS,oBAAUmB,MAAV,CAAiBE;AAL3B,C;;AAwFD;;AAEA;;kBA5HqB/B,S;AA6HrB,SAASc,gBAAT,CAA0BX,KAA1B,EACA;AACC,QAAOA,MAAMgC,MAAN,KAAiB,CAAxB;AACA;;AAED;AACA,SAAStB,eAAT,CAAyBV,KAAzB,EACA;AACC,QAAO,CAAC,EAAEA,MAAMiC,OAAN,IAAiBjC,MAAMkC,MAAvB,IAAiClC,MAAMmC,OAAvC,IAAkDnC,MAAMoC,QAA1D,CAAR;AACA;;AAED;AACA,SAAStB,iBAAT,CAA2BX,EAA3B,EAA+BG,MAA/B,EACA;AACC,QAAO,OAAOH,EAAP,KAAc,UAAd,GAA2BA,GAAGG,OAAOc,QAAV,CAA3B,GAAiDjB,EAAxD;AACA","file":"Link.js","sourcesContent":["// https://github.com/ReactTraining/react-router/blob/master/modules/Link.js\n\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router'\nimport { preload_action } from './actions'\n\nexport default class Hyperlink extends Component\n{\n\tstatic propTypes =\n\t{\n\t\t// User may supply his own `onClick(event)` handler\n\t\tonClick  : PropTypes.func,\n\n\t\t// HTML `<a target={...}>` attribute\n\t\ttarget   : PropTypes.string,\n\n\t\t// Link destination\n\t\t// (a URL, or a location object,\n\t\t//  or a function of the current location)\n\t\tto       : PropTypes.oneOfType\n\t\t([\n\t\t\tPropTypes.string,\n\t\t\tPropTypes.object,\n\t\t\tPropTypes.func\n\t\t]),\n\n\t\t// Set to `true` to disable page `@preload()`ing\n\t\t// when navigating \"Back\"\n\t\tinstantBack : PropTypes.bool.isRequired,\n\n\t\t// Wrapped components\n\t\tchildren : PropTypes.node\n\t}\n\n\tstatic defaultProps =\n\t{\n\t\tinstantBack : false\n\t}\n\n\tstatic contextTypes =\n\t{\n\t\t// `react-router` context required\n\t\trouter : PropTypes.object.isRequired,\n\t\t\n\t\t// `react-redux` context required\n\t\tstore  : PropTypes.object.isRequired\n\t}\n\n\tconstructor()\n\t{\n\t\tsuper()\n\n\t\tthis.on_click = this.on_click.bind(this)\n\t}\n\n\ton_click(event)\n\t{\n\t\tconst { onClick, to, instantBack } = this.props\n\t\tconst { router, store } = this.context\n\t\t\n\t\t// Sanity check\n\t\tif (!router)\n\t\t{\n\t\t\tthrow new Error('<Link>s rendered outside of a router context cannot navigate.')\n\t\t}\n\t\t\n\t\t// Sanity check\n\t\tif (!store)\n\t\t{\n\t\t\tthrow new Error('<Link>s rendered outside of a Redux context cannot navigate.')\n\t\t}\n\n\t\t// User may have supplied his own `onClick` handler\n\t\tif (onClick)\n\t\t{\n\t\t\tonClick(event)\n\t\t}\n\n\t\t// `onClick` could call `event.preventDefault()`\n\t\t// to intercept `react-router` navigation.\n\t\tif (event.defaultPrevented)\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\t// Only process left mouse button clicks without modifier keys pressed\n\t\tif (isModifiedEvent(event) || !isLeftClickEvent(event))\n\t\t{\n\t\t\treturn\n\t\t}\n\n\t\t// Cancel `react-router` navigation inside its own `<Link/>`\n\t\tevent.preventDefault()\n\n\t\t// Firt preload the new page, then `history.push()` will be called,\n\t\t// and `react-router` will detect that performing the route transition.\n\t\tstore.dispatch(preload_action(resolveToLocation(to, router), undefined, undefined, undefined, instantBack))\n\t}\n\n\trender()\n\t{\n\t\tconst { instantBack, ...link_props } = this.props\n\t\tconst { to, target, children, ...rest_props } = link_props\n\t\tconst { router } = this.context\n\n\t\t// Sanity check\n\t\tif (!router)\n\t\t{\n\t\t\tthrow new Error('<Link>s rendered outside of a router context cannot navigate.')\n\t\t}\n\t\t\n\t\t// `to` could be a function of the current `location`\n\t\tconst location = resolveToLocation(to, router)\n\n\t\t// Is it a link to an absolute URL or to a relative (local) URL.\n\t\tconst is_local_website_link = (typeof location === 'object')\n\t\t\t|| (typeof location === 'string' && location && location[0] === '/')\n\n\t\tif (is_local_website_link && !target)\n\t\t{\n\t\t\treturn <Link { ...link_props } onClick={ this.on_click }>{ children }</Link>\n\t\t}\n\n\t\t// External links (or links with `target` specified, like \"open in a new tab\")\n\t\treturn <a href={ to } target={ target } { ...rest_props }>{ children }</a>\n\t}\n}\n\n// export default withRouter(Hyperlink)\n\n// Is it a left mouse button click\nfunction isLeftClickEvent(event)\n{\n\treturn event.button === 0\n}\n\n// Was a modifier key pressed during the event\nfunction isModifiedEvent(event)\n{\n\treturn !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n}\n\n// `to` could be a function of the current `location`\nfunction resolveToLocation(to, router)\n{\n\treturn typeof to === 'function' ? to(router.location) : to\n}"]}