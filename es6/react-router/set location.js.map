{"version":3,"sources":["../../source/react-router/set location.js"],"names":["readState","saveState","PUSH","REPLACE","SCROLL_STATE_KEY_PREFIX","replace_location","location","history","set_location","push_location","method","key","createKey","get_scroll","createLocation","scroll","remount","transitionTo","window","pageXOffset","pageYOffset"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,SAApB,QAAqC,6BAArC;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,qBAA9B;;AAEA;AACA,IAAMC,0BAA0B,WAAhC;;AAEA;AACA,OAAO,SAASC,gBAAT,CAA0BC,QAA1B,EAAoCC,OAApC,EACP;AACC,QAAOC,aAAaF,QAAb,EAAuBC,OAAvB,EAAgCJ,OAAhC,CAAP;AACA;;AAED;AACA,OAAO,SAASM,aAAT,CAAuBH,QAAvB,EAAiCC,OAAjC,EACP;AACC,QAAOC,aAAaF,QAAb,EAAuBC,OAAvB,EAAgCL,IAAhC,CAAP;AACA;;AAED;AACA,SAASM,YAAT,CAAsBF,QAAtB,EAAgCC,OAAhC,EAAyCG,MAAzC,EACA;AACC;AACA,KAAMC,MAAMJ,QAAQK,SAAR,EAAZ;AACA;AACA;AACAX,gBAAaG,uBAAb,GAAuCO,GAAvC,EAA8CE,YAA9C;AACA;AACAP,YAAWC,QAAQO,cAAR,CAAuBR,QAAvB,EAAiCI,MAAjC,EAAyCC,GAAzC,CAAX;AACA;AACA;AACAL,UAASS,MAAT,GAAkB,KAAlB;AACA;AACAT,UAASU,OAAT,GAAmB,KAAnB;AACA;AACAT,SAAQU,YAAR,CAAqBX,QAArB;AACA;;AAED;AACA,SAASO,UAAT,GACA;AACC;AACA,QAAO,CAACK,OAAOC,WAAR,EAAqBD,OAAOE,WAA5B,CAAP;AACA;;AAED;AACA;AACA;AACA;AACA","file":"set location.js","sourcesContent":["import { readState, saveState } from 'history/lib/DOMStateStorage'\nimport { PUSH, REPLACE } from 'history/lib/Actions'\n\n// https://github.com/taion/react-router-scroll/blob/master/src/StateStorage.js\nconst SCROLL_STATE_KEY_PREFIX = '@@scroll|'\n\n// Replaces the current URL in the browser address bar (and in the history)\nexport function replace_location(location, history)\n{\n\treturn set_location(location, history, REPLACE)\n}\n\n// Replaces the current URL in the browser address bar (pushing it to the history)\nexport function push_location(location, history)\n{\n\treturn set_location(location, history, PUSH)\n}\n\n// Replaces the current URL in the browser address bar (pushing it to the history)\nfunction set_location(location, history, method)\n{\n\t// A little bit of a fight with `scroll-behavior` here\n\tconst key = history.createKey()\n\t// Save the correct `scroll-behavior`'s scroll position\n\t// in this new history entry `scroll-behavior` state.\n\tsaveState(`${SCROLL_STATE_KEY_PREFIX}${key}`, get_scroll())\n\t// Set the new `location` `key`\n\tlocation = history.createLocation(location, method, key)\n\t// Prevent `scroll-behavior` from messing\n\t// with scroll on this location transition\n\tlocation.scroll = false\n\t// Prevent `react-router` from remounting page component\n\tlocation.remount = false\n\t// Transition to the new location\n\thistory.transitionTo(location)\n}\n\n// Gets window scroll position\nfunction get_scroll()\n{\n\t// Works in IE 10+\n\treturn [window.pageXOffset, window.pageYOffset]\n}\n\n// // https://github.com/mjackson/history/blob/v3.x/modules/createHistory.js\n// function createKey()\n// {\n// \treturn Math.random().toString(36).substr(2, 6)\n// }\n"]}