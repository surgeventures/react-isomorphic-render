{"version":3,"sources":["../../source/static-site-generator/snapshot.js"],"names":["host","port","pages","output","tick","fs","removeSync","page","download","page_contents","outputFileSync","path","join","snapshot","progress","unshift","snapshot_progress","width","total","length","progress_tick","snapshot_website"],"mappings":";;;;;wDAiCA,kBAAwBA,IAAxB,EAA8BC,IAA9B,EAAoCC,KAApC,EAA2CC,MAA3C,EAAmDC,IAAnD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEC;AACAC,SAAGC,UAAH,CAAcH,MAAd;;AAEA;AALD;AAAA;AAAA;AAAA;AAAA,+BAMoBD,KANpB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMYK,UANZ;AAAA;AAAA,aAQ8BC,qBAAmBR,IAAnB,SAA2BC,IAA3B,GAAkCM,IAAlC,CAR9B;;AAAA;AAQQE,mBARR;;AASEJ,SAAGK,cAAH,CAAkBC,KAAKC,IAAL,CAAUT,MAAV,EAAkBI,IAAlB,EAAwB,aAAxB,CAAlB,EAA0DE,aAA1D;AACAL;;AAVF;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeS,Q;;;;;AAjCf,OAAOF,IAAP,MAAiB,MAAjB;AACA,OAAON,EAAP,MAAe,UAAf;AACA,OAAOS,QAAP,MAAqB,UAArB;;AAEA,OAAON,QAAP,MAAqB,YAArB;;AAEA;AACA;AAAA,uDAAe;AAAA,MAAkCR,IAAlC,SAAkCA,IAAlC;AAAA,MAAwCC,IAAxC,SAAwCA,IAAxC;AAAA,MAA8CC,KAA9C,SAA8CA,KAA9C;AAAA,MAAqDC,MAArD,SAAqDA,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAEd;AACAD,YAAMa,OAAN,CAAc,EAAd;;AAEA;AACMC,uBANQ,GAMY,IAAIF,QAAJ,CAAa,4CAAb,EAC1B;AACCG,cAAO,EADR;AAECC,cAAOhB,MAAMiB;AAFd,OAD0B,CANZ;;AAYd;;AAZc;AAAA,aAaRN,SAELb,IAFK,EAGLC,IAHK,EAILC,KAJK,EAKLC,MALK,EAML,SAASiB,aAAT,GACA;AACCJ,yBAAkBZ,IAAlB;AACA,OATI,CAbQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAf;;AAAA,UAA8BiB,gBAA9B;AAAA;AAAA;;AAAA,QAA8BA,gBAA9B;AAAA","file":"snapshot.js","sourcesContent":["import path from 'path'\nimport fs from 'fs-extra'\nimport progress from 'progress'\n\nimport download from './download'\n\n// Snapshots all pages (URLs)\nexport default async function snapshot_website({ host, port, pages, output })\n{\n\t// Add the main (\"home\") page\n\tpages.unshift('')\n\n\t// The progress meter for the website snapshotting process\n\tconst snapshot_progress = new progress(' Snapshotting [:bar] :total :percent :etas',\n\t{\n\t\twidth: 50,\n\t\ttotal: pages.length\n\t})\n\n\t// Start the website snapshotting process\n\tawait snapshot\n\t(\n\t\thost,\n\t\tport,\n\t\tpages,\n\t\toutput,\n\t\tfunction progress_tick()\n\t\t{\n\t\t\tsnapshot_progress.tick()\n\t\t}\n\t)\n}\n\nasync function snapshot(host, port, pages, output, tick)\n{\n\t// Clear the output folder\n\tfs.removeSync(output)\n\n\t// Snapshot every page and put it into the output folder\n\tfor (const page of pages)\n\t{\n\t\tconst page_contents = await download(`http://${host}:${port}${page}`)\n\t\tfs.outputFileSync(path.join(output, page, '/index.html'), page_contents)\n\t\ttick()\n\t}\n}\n"]}